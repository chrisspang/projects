<p id="notice"><%= notice %></p>

<h1>Listing Projects</h1>

<script src="//maps.google.com/maps/api/js?v=3.13&amp;sensor=false&amp;libraries=geometry" type="text/javascript"></script>
<script src='//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js' type='text/javascript'></script>

<div style='width: 800px;'>
  <div id="map" style='width: 800px; height: 400px;'></div>
</div>

  <div class='row'>
    <div class='col-sm-12'>
      <p>
        <form>
          <legend>Search</legend>
          <div class='col-xs-4'>
            <input type='text' class='form-control' value='<%= params[:keyword] %>' name='keyword' placeholder='Keyword' >
          </div>
        </form>
      </p>
    </div>
  </div>

  <hr>


<table class="table table-condensed">
  <thead>
    <tr>
      <th>Name</th>
      <th>Title</th>
      <th>Verified</th>
      <th>Latitude</th>
      <th>Longitude</th>
      <th>Builder</th>
      <th colspan="4"></th>
    </tr>
  </thead>

  <tbody>
    <% @projects.each do |project| %>
      <tr>
        <td><%= project.name %></td>
        <td><%= project.title %></td>
        <td><%= project.verified %></td>
        <td><%= project.latitude %></td>
        <td><%= project.longitude %></td>
        <td>
            <% if project.builder %>
                <%= link_to project.builder.title, builder_path(project.builder) %>
            <% end %>
        </td>
        <td><%= link_to 'Show', project %></td>
        <td><%= link_to 'Edit', edit_project_path(project) %></td>
        <td><%= link_to 'Destroy', project, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        <td><a href="#" data-map-lat="<%= project.latitude %>"
               data-map-long="<%= project.longitude %>">Zoom to</a></td>
      </tr>
    <% end %>
  </tbody>
</table>

<%= javascript_tag defer: 'defer' do -%>
 map_markers = <%=raw @map_markers.to_json %>;
 map_add_marker = 0;
<% end -%>
